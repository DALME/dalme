{"remainingRequest":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gabep/Repos/DALME-Online-Database/dalme_ui/src/components/dt.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/src/components/dt.vue","mtime":1594578931715},{"path":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gabep/Repos/DALME-Online-Database/dalme_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvQXBpUm91dGVyJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBlbmRwb2ludDogU3RyaW5nLAogICAgdGl0bGU6IFN0cmluZywKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERhdGEoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGlmICh0aGlzLnNlYXJjaCkgewogICAgICAgIHRoaXMub3B0aW9ucy5zZWFyY2ggPSB0aGlzLnNlYXJjaAogICAgICB9CiAgICAgIGFwaS5nZXQodGhpcy5lbmRwb2ludCwgJ2xpc3QnLCB0aGlzLm9wdGlvbnMpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmVudHJpZXMgPSByZXMuZGF0YS5yZXN1bHRzCiAgICAgICAgdGhpcy5oZWFkZXJzID0gcmVzLmRhdGEuaGVhZGVycwogICAgICAgIHRoaXMudG90YWxfZW50cmllcyA9IHJlcy5kYXRhLml0ZW1zUGVyUGFnZQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZWRpdEl0ZW0oaXRlbSkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5lbnRyaWVzLmluZGV4T2YoaXRlbSkKICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSkKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICB9LAogICAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbnRyaWVzLmluZGV4T2YoaXRlbSkKICAgICAgY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNpdHk/JykgJiYgdGhpcy5lbnRyaWVzLnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRJdGVtKQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMQogICAgICB9LCAzMDApCiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5lbnRyaWVzW3RoaXMuZWRpdGVkSW5kZXhdLCB0aGlzLmVkaXRlZEl0ZW0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbnRyaWVzLnB1c2godGhpcy5lZGl0ZWRJdGVtKQogICAgICB9CiAgICAgIHRoaXMuY2xvc2UoKQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBub3RpZmljYXRpb246IGZhbHNlLAogICAgICBzaW5nbGVTZWxlY3Q6IGZhbHNlLAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHNlYXJjaDogJycsCiAgICAgIHRvdGFsX2VudHJpZXM6IDAsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogNTAsCiAgICAgIH0sCiAgICAgIGVudHJpZXM6IFtdLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBoZWFkZXJzOiBbXSwKICAgICAgZWRpdGVkSW5kZXg6IC0xLAogICAgICBlZGl0ZWRJdGVtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgYWRtaW5pc3RyYXRpdmVfcmVnaW9uOiAnJywKICAgICAgICBjb3VudHJ5OiAnJywKICAgICAgfSwKICAgICAgZGVmYXVsdEl0ZW06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZG1pbmlzdHJhdGl2ZV9yZWdpb246ICcnLAogICAgICAgIGNvdW50cnk6ICcnLAogICAgICB9LAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgICAgZm9ybVRpdGxlKCkgewogICAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICdOZXcgQ2l0eScgOiAnRWRpdCBDaXR5JwogICAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgICAgb3B0aW9uczogewogICAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgICB0aGlzLmdldERhdGEoKQogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VhcmNoOiB7CiAgICAgICAgaGFuZGxlcigpIHsKICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgfQogICAgICB9LAogICAgICBkaWFsb2codmFsKSB7CiAgICAgICAgdmFsIHx8IHRoaXMuY2xvc2UoKQogICAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpOwogIH0KfTsK"},{"version":3,"sources":["dt.vue"],"names":[],"mappings":";;;;;;AAMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dt.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <DataTable :value=\"entries\" :paginator=\"true\" :rows=\"10\">\n    <Column v-for=\"col of headers\" :field=\"col.field\" :header=\"col.header\" :key=\"col.field\"></Column>\n  </DataTable>\n</template>\n<script>\nimport api from '@/api/ApiRouter'\n\nexport default {\n  props: {\n    endpoint: String,\n    title: String,\n  },\n  methods: {\n    getData() {\n      this.loading = true;\n      if (this.search) {\n        this.options.search = this.search\n      }\n      api.get(this.endpoint, 'list', this.options).then(res => {\n        this.entries = res.data.results\n        this.headers = res.data.headers\n        this.total_entries = res.data.itemsPerPage\n        this.loading = false\n      })\n    },\n    editItem(item) {\n      this.editedIndex = this.entries.indexOf(item)\n      this.editedItem = Object.assign({}, item)\n      this.dialog = true\n    },\n    deleteItem(item) {\n      const index = this.entries.indexOf(item)\n      confirm('Are you sure you want to delete this city?') && this.entries.splice(index, 1)\n    },\n    close() {\n      this.dialog = false\n      setTimeout(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      }, 300)\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.entries[this.editedIndex], this.editedItem)\n      } else {\n        this.entries.push(this.editedItem)\n      }\n      this.close()\n    },\n  },\n  data() {\n    return {\n      dialog: false,\n      notification: false,\n      singleSelect: false,\n      selected: [],\n      search: '',\n      total_entries: 0,\n      options: {\n        page: 1,\n        itemsPerPage: 50,\n      },\n      entries: [],\n      loading: true,\n      headers: [],\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        administrative_region: '',\n        country: '',\n      },\n      defaultItem: {\n        name: '',\n        administrative_region: '',\n        country: '',\n      },\n    }\n  },\n  computed: {\n      formTitle() {\n        return this.editedIndex === -1 ? 'New City' : 'Edit City'\n      },\n  },\n  watch: {\n      options: {\n        handler() {\n          this.getData()\n        }\n      },\n      search: {\n        handler() {\n          this.getData()\n        }\n      },\n      dialog(val) {\n        val || this.close()\n      },\n  },\n  mounted() {\n    this.getData();\n  }\n};\n</script>\n"]}]}